# Woocommerce - Información Nutricional Chile

**Versión:** 1.0.2
**Autor:** Tech4In
**Plugin URI:** https://tech4in.com/producto/woocommerce-informacion-nutricional-chile/
**Author URI:** https://tech4in.com
**Text Domain:** woocommerce-informacion-nutricional-chile
**Domain Path:** /languages

## Descripción

El plugin "Woocommerce - Información Nutricional Chile" te permite añadir fácilmente información nutricional y sellos de advertencia a tus productos de WooCommerce, cumpliendo con la normativa chilena. Proporciona metaboxes intuitivos para especificar datos como porciones, energía, proteínas, grasas, hidratos de carbono, azúcares y sodio, además de marcar alérgenos y activar los sellos de advertencia correspondientes.

**Beneficios:**

*   Cumple con la normativa chilena de etiquetado nutricional.
*   Proporciona información clara y completa a tus clientes.
*   Mejora la transparencia y la confianza en tus productos.
*   Fácil de usar, incluso sin conocimientos técnicos.

## Instalación

1. **Requisitos:**
   - WordPress 5.0 o superior.
   - WooCommerce 3.0 o superior.
   - PHP 7.0 o superior.

2. **Subir e Instalar el Plugin:**
   1. **Descarga** el archivo ZIP del plugin `woocommerce-informacion-nutricional-chile`.
   2. En tu panel de administración de WordPress, ve a **Plugins > Añadir Nuevo**.
   3. Haz clic en **Subir Plugin** y selecciona el archivo ZIP que descargaste.
   4. Haz clic en **Instalar Ahora**.
   5. Una vez instalado, haz clic en **Activar Plugin**.
   6. ¡Listo! El plugin **Información Nutricional Chile** ya está instalado y activado.

   ![GIF mostrando el proceso de instalación](link-al-gif-de-instalacion.gif)

3. **Configuración Inicial:**
   - Tras la activación, edita un producto existente o crea uno nuevo en WooCommerce. Verás las nuevas secciones (metaboxes) en la parte inferior de la página de edición.

   ![Captura de pantalla de los metaboxes](link-a-la-captura-de-pantalla-de-los-metaboxes.png)

## Configuración

El plugin añade tres metaboxes en la pantalla de edición de productos de WooCommerce:

### Sellos de Advertencia

Este metabox te permite activar los sellos de advertencia correspondientes a tu producto:

*   **Alto en Sodio:** Marca esta opción si el producto es alto en sodio.
*   **Alto en Azúcares:** Marca esta opción si el producto es alto en azúcares.
*   **Alto en Grasas Saturadas:** Marca esta opción si el producto es alto en grasas saturadas.
*   **Alto en Calorías:** Marca esta opción si el producto es alto en calorías.

### Tabla Nutricional

Este metabox te permite ingresar la información nutricional de tu producto:

*   **Descripción de la porción:** Describe la porción del producto (ej. 1 cucharadita, 2 unidades).
*   **Porción en gramos:** Ingresa la porción en gramos (solo número entero).
*   **Porciones por envase:** Ingresa el número de porciones por envase.
*   **Energía (kcal) por porción:** Ingresa la energía en kcal por porción.
*   **Proteínas (g) por porción:** Ingresa las proteínas en gramos por porción.
*   **Grasa total (g) por porción:** Ingresa la grasa total en gramos por porción.
*   **Hidratos de carbono (g) por porción:** Ingresa los hidratos de carbono en gramos por porción.
*   **Azúcares totales (g) por porción:** Ingresa los azúcares totales en gramos por porción.
*   **Sodio (mg) por porción:** Ingresa el sodio en miligramos por porción.
*   **Listado de ingredientes:** Ingresa el listado de ingredientes del producto.

### Tabla de Alérgenos

Este metabox te permite marcar los alérgenos presentes en tu producto:

*   **Gluten:** Marca esta opción si el producto contiene gluten.
*   **Crustáceos:** Marca esta opción si el producto contiene crustáceos.
*   **Huevos:** Marca esta opción si el producto contiene huevos.
*   **Pescado:** Marca esta opción si el producto contiene pescado.
*   **Maní:** Marca esta opción si el producto contiene maní.
*   **Soya:** Marca esta opción si el producto contiene soya.
*   **Leche:** Marca esta opción si el producto contiene leche.
*   **Nueces:** Marca esta opción si el producto contiene nueces.
*   **Sulfitos:** Marca esta opción si el producto contiene sulfitos.

## Uso

1. **Edición del Producto:**
   - Al editar un producto en WooCommerce, encontrarás las secciones de "Sellos de Advertencia", "Tabla Nutricional" y "Tabla de Alérgenos".
   - Marca las opciones correspondientes para los sellos y alérgenos.
   - Ingresa los datos nutricionales en la tabla.
   - **Importante:** Guarda el producto después de ingresar la información nutricional para que los cambios se reflejen en el frontend.
   *   Asegúrate de tener la información nutricional precisa de tus productos. Consulta las etiquetas de los productos o la información proporcionada por tus proveedores.
   *   Si un campo no aplica para un producto, puedes dejarlo en blanco.

2. **Visualización en el Frontend:**
   - La información ingresada se mostrará en la página del producto, debajo del resumen.
   - Se presentará una tabla nutricional comparando valores por porción y por 100g, además de imágenes de los sellos activos.

   ![Captura de pantalla de la tabla nutricional en el frontend](link-a-la-captura-de-pantalla-de-la-tabla-nutricional.png)

## Preguntas Frecuentes (FAQ)

**P: ¿Necesito conocimientos técnicos para usar este plugin?**
R: No, **Información Nutricional Chile** está diseñado para ser fácil de usar incluso para usuarios sin experiencia técnica. La interfaz es intuitiva y la documentación te guía paso a paso.

**P: ¿El plugin es compatible con mi tema de WooCommerce?**
R: **Información Nutricional Chile** debería ser compatible con la mayoría de los temas de WooCommerce. Sin embargo, si experimentas algún problema de compatibilidad, contáctanos y te ayudaremos.

**P: ¿Dónde se muestra la tabla nutricional en la página del producto?**
R: La tabla nutricional se muestra debajo de la descripción corta del producto, en la pestaña "Información Adicional" o en una ubicación similar, dependiendo de tu tema.

**P: ¿Qué unidades de medida debo usar?**
R: Utiliza las unidades de medida estándar chilenas para la información nutricional (kcal, g, mg, etc.).

**P: ¿Cómo puedo obtener soporte si tengo problemas?**
R: Puedes contactarnos a través de nuestro sistema de tickets de soporte en [TECH4in](https://tech4in.com/soporte) o enviarnos un correo electrónico a [soporte@tech4in.com](mailto:soporte@tech4in.com). ¡Estamos aquí para ayudarte!

**P: ¿Los datos ingresados se eliminan al desactivar el plugin?**
R: No, los metadatos se mantienen en la base de datos. Para eliminarlos, se debe realizar una limpieza manual o mediante un script de desinstalación.

**P: ¿Puedo personalizar el estilo de la tabla nutricional?**
R: Sí, puedes editar el archivo CSS ubicado en `assets/css/frontend-styles.css` para modificar la apariencia.

**P: ¿Cómo puedo traducir el plugin a otro idioma?**
R: Puedes traducir el plugin utilizando un plugin como Loco Translate o Poedit. Los archivos de traducción (.po y .mo) se encuentran en la carpeta `languages/`.

**P: ¿El plugin afecta el rendimiento de mi sitio?**
R: El plugin está optimizado para tener un impacto mínimo en el rendimiento. Sin embargo, si tienes muchos productos con información nutricional, te recomendamos utilizar un plugin de caché para mejorar la velocidad de tu sitio.

## Changelog

**1.0.3 - 2025-03-07**

### Fixed

*   Se corrigió el error `Cannot redeclare INCW_Productos_Alimenticios_Chile_Metaboxes::incw_display_tabla_nutricional_metabox()` que ocurría al incluir el archivo `class-metaboxes.php` múltiples veces.
*   Se corrigió el aviso `_load_textdomain_just_in_time ha sido llamada de forma incorrecta` al cargar las traducciones de WooCommerce demasiado pronto.

### Changed

*   Se modificó la forma en que se incluye e instancia la clase `INCW_Productos_Alimenticios_Chile_Metaboxes` para evitar la doble declaración.
*   Se movió la instanciación de la clase `INCW_Productos_Alimenticios_Chile_Metaboxes` al hook `plugins_loaded` en el archivo principal del plugin.
*   Se movió la carga del dominio de texto al hook `init` en el archivo principal del plugin.
*   Se optimizó la función `incw_instantiate_metaboxes()` para asegurar que WooCommerce esté activo antes de incluir e instanciar la clase `INCW_Productos_Alimenticios_Chile_Metaboxes`.

**1.0.2 - 2023-10-27**

### Fixed

*   Se corrigió un problema de visualización en el metabox de alérgenos que afectaba la apariencia en algunos temas.
*   Se mejoró la validación de los campos numéricos en la tabla nutricional para evitar errores de ingreso de datos.

### Changed

*   Se actualizó la versión de la librería Freemius SDK a la última versión disponible.
*   Se refactorizó el código para mejorar la eficiencia en el guardado de los datos de alérgenos.
*   Se refactorizó el código para mejorar la verificación de los "nonces" de seguridad.
*   Se optimizaron los estilos CSS para mejorar la mantenibilidad y adaptabilidad del plugin.
*   Se agregaron variables CSS para facilitar la personalización de los estilos.
*   Se utilizaron unidades relativas (em) en lugar de absolutas (px) para mejorar la adaptabilidad a diferentes tamaños de pantalla.
*   Se agregaron "media queries" para mejorar la visualización en dispositivos móviles.
*   **Se aplicaron prefijos a todas las funciones, clases, constantes y hooks para cumplir con las normas de WordPress.org.**
*   **Se aplicaron prefijos a las clases CSS en los archivos de estilos para evitar conflictos con otros plugins o temas.**

### Added

*   Se agregaron elementos `<caption>` a las tablas para mejorar la accesibilidad.
*   Se agregaron nuevas cadenas de texto al archivo de traducción (.po) para una traducción más completa.

**1.0.1 - 2023-09-15**

### Fixed

*   Se corrigió un error que impedía guardar correctamente la información nutricional en algunos casos.

### Changed

*   Se optimizó el código para mejorar el rendimiento general del plugin.

**1.0.0 - 2023-08-01**

### Added

*   Versión inicial del plugin "Woocommerce - Información Nutricional Chile".
*   Permite agregar información nutricional y sellos de advertencia a los productos de WooCommerce.
*   Incluye metaboxes para Sellos de Advertencia, Tabla Nutricional y Tabla de Alérgenos.

## Licencia

Este plugin se distribuye bajo la licencia GPLv2 o superior. Consulta el archivo [LICENSE](LICENSE.txt) para obtener más detalles.

## Soporte

Para soporte, visita [TECH4in](https://tech4in.com/soporte) o envía un correo a [soporte@tech4in.com](mailto:soporte@tech4in.com).